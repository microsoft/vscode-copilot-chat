{"log":[{"documentType":"workspaceRecording@1.0","kind":"header","repoRootUri":"file:///c%3A/Code/vscode","time":1770027668461,"uuid":"670febcf-648c-418f-9c12-db7863ece235"},{"kind":"documentEncountered","id":26,"relativePath":"src\\vs\\workbench\\services\\inlineCompletions\\common\\inlineCompletionsUnification.ts","time":1770025681623},{"kind":"setContent","id":26,"v":1,"content":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport { equals } from '../../../../base/common/arrays.js';\r\nimport { Event, Emitter } from '../../../../base/common/event.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IExtensionManagementService } from '../../../../platform/extensionManagement/common/extensionManagement.js';\r\nimport { ExtensionType } from '../../../../platform/extensions/common/extensions.js';\r\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\r\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IProductService } from '../../../../platform/product/common/productService.js';\r\nimport { IWorkbenchAssignmentService } from '../../assignment/common/assignmentService.js';\r\nimport { EnablementState, IWorkbenchExtensionEnablementService } from '../../extensionManagement/common/extensionManagement.js';\r\nimport { IExtensionService } from '../../extensions/common/extensions.js';\r\n\r\nexport const IInlineCompletionsUnificationService = createDecorator<IInlineCompletionsUnificationService>('inlineCompletionsUnificationService');\r\n\r\nexport interface IInlineCompletionsUnificationState {\r\n\tcodeUnification: boolean;\r\n\tmodelUnification: boolean;\r\n\textensionUnification: boolean;\r\n\texpAssignments: string[];\r\n}\r\n\r\nexport interface IInlineCompletionsUnificationService {\r\n\treadonly _serviceBrand: undefined;\r\n\r\n\treadonly state: IInlineCompletionsUnificationState;\r\n\treadonly onDidStateChange: Event<void>;\r\n}\r\n\r\nconst CODE_UNIFICATION_PREFIX = 'cmp-cht-';\r\nconst EXTENSION_UNIFICATION_PREFIX = 'cmp-ext-';\r\nconst CODE_UNIFICATION_FF = 'inlineCompletionsUnificationCode';\r\nconst MODEL_UNIFICATION_FF = 'inlineCompletionsUnificationModel';\r\n\r\nexport const isRunningUnificationExperiment = new RawContextKey<boolean>('isRunningUnificationExperiment', false);\r\n\r\nconst ExtensionUnificationSetting = 'chat.extensionUnification.enabled';\r\n\r\nexport class InlineCompletionsUnificationImpl extends Disposable implements IInlineCompletionsUnificationService {\r\n\treadonly _serviceBrand: undefined;\r\n\r\n\tprivate _state = new InlineCompletionsUnificationState(false, false, false, []);\r\n\tpublic get state(): IInlineCompletionsUnificationState { return this._state; }\r\n\r\n\tprivate isRunningUnificationExperiment;\r\n\r\n\tprivate readonly _onDidStateChange = this._register(new Emitter<void>());\r\n\tpublic readonly onDidStateChange = this._onDidStateChange.event;\r\n\r\n\tprivate readonly _onDidChangeExtensionUnificationState = this._register(new Emitter<void>());\r\n\tprivate readonly _onDidChangeExtensionUnificationSetting = this._register(new Emitter<void>());\r\n\r\n\tprivate readonly _completionsExtensionId: string | undefined;\r\n\tprivate readonly _chatExtensionId: string | undefined;\r\n\r\n\tconstructor(\r\n\t\t@IWorkbenchAssignmentService private readonly _assignmentService: IWorkbenchAssignmentService,\r\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\r\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\r\n\t\t@IWorkbenchExtensionEnablementService private readonly _extensionEnablementService: IWorkbenchExtensionEnablementService,\r\n\t\t@IExtensionManagementService private readonly _extensionManagementService: IExtensionManagementService,\r\n\t\t@IExtensionService private readonly _extensionService: IExtensionService,\r\n\t\t@IProductService productService: IProductService\r\n\t) {\r\n\t\tsuper();\r\n\t\tthis._completionsExtensionId = productService.defaultChatAgent?.extensionId.toLowerCase();\r\n\t\tthis._chatExtensionId = productService.defaultChatAgent?.chatExtensionId.toLowerCase();\r\n\t\tconst relevantExtensions = [this._completionsExtensionId, this._chatExtensionId].filter((id): id is string => !!id);\r\n\r\n\t\tthis.isRunningUnificationExperiment = isRunningUnificationExperiment.bindTo(this._contextKeyService);\r\n\r\n\t\tthis._assignmentService.addTelemetryAssignmentFilter({\r\n\t\t\texclude: (assignment) => assignment.startsWith(EXTENSION_UNIFICATION_PREFIX) && this._state.extensionUnification !== this._configurationService.getValue<boolean>(ExtensionUnificationSetting),\r\n\t\t\tonDidChange: Event.any(this._onDidChangeExtensionUnificationState.event, this._onDidChangeExtensionUnificationSetting.event)\r\n\t\t});\r\n\r\n\t\tthis._register(this._extensionEnablementService.onEnablementChanged((extensions) => {\r\n\t\t\tif (extensions.some(ext => relevantExtensions.includes(ext.identifier.id.toLowerCase()))) {\r\n\t\t\t\tthis._update();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\r\n\t\t\tif (e.affectsConfiguration(ExtensionUnificationSetting)) {\r\n\t\t\t\tthis._update();\r\n\t\t\t\tthis._onDidChangeExtensionUnificationSetting.fire();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tthis._register(this._extensionService.onDidChangeExtensions(({ added }) => {\r\n\t\t\tif (added.some(ext => relevantExtensions.includes(ext.identifier.value.toLowerCase()))) {\r\n\t\t\t\tthis._update();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tthis._register(this._assignmentService.onDidRefetchAssignments(() => this._update()));\r\n\t\tthis._update();\r\n\t}\r\n\r\n\tprivate async _update(): Promise<void> {\r\n\t\tconst [codeUnificationFF, modelUnificationFF, extensionUnificationEnabled] = await Promise.all([\r\n\t\t\tthis._assignmentService.getTreatment<boolean>(CODE_UNIFICATION_FF),\r\n\t\t\tthis._assignmentService.getTreatment<boolean>(MODEL_UNIFICATION_FF),\r\n\t\t\tthis._isExtensionUnificationActive()\r\n\t\t]);\r\n\r\n\t\tconst extensionStatesMatchUnificationSetting = this._configurationService.getValue<boolean>(ExtensionUnificationSetting) === extensionUnificationEnabled;\r\n\r\n\t\t// Intentionally read the current experiments after fetching the treatments\r\n\t\tconst currentExperiments = await this._assignmentService.getCurrentExperiments();\r\n\t\tconst newState = new InlineCompletionsUnificationState(\r\n\t\t\tcodeUnificationFF === true,\r\n\t\t\tmodelUnificationFF === true,\r\n\t\t\textensionUnificationEnabled,\r\n\t\t\tcurrentExperiments?.filter(exp => exp.startsWith(CODE_UNIFICATION_PREFIX) || (extensionStatesMatchUnificationSetting && exp.startsWith(EXTENSION_UNIFICATION_PREFIX))) ?? []\r\n\t\t);\r\n\t\tif (this._state.equals(newState)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst previousState = this._state;\r\n\t\tthis._state = newState;\r\n\t\tthis.isRunningUnificationExperiment.set(this._state.codeUnification || this._state.modelUnification || this._state.extensionUnification);\r\n\t\tthis._onDidStateChange.fire();\r\n\r\n\t\tif (previousState.extensionUnification !== this._state.extensionUnification) {\r\n\t\t\tthis._onDidChangeExtensionUnificationState.fire();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async _isExtensionUnificationActive(): Promise<boolean> {\r\n\t\tif (!this._configurationService.getValue<boolean>(ExtensionUnificationSetting)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (!this._completionsExtensionId || !this._chatExtensionId) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst [completionsExtension, chatExtension, installedExtensions] = await Promise.all([\r\n\t\t\tthis._extensionService.getExtension(this._completionsExtensionId),\r\n\t\t\tthis._extensionService.getExtension(this._chatExtensionId),\r\n\t\t\tthis._extensionManagementService.getInstalled(ExtensionType.User)\r\n\t\t]);\r\n\r\n\t\tif (!chatExtension || completionsExtension) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Extension might be installed on remote and local\r\n\t\tconst completionExtensionInstalled = installedExtensions.filter(ext => ext.identifier.id.toLowerCase() === this._completionsExtensionId);\r\n\t\tif (completionExtensionInstalled.length === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tconst completionsExtensionDisabledByUnification = completionExtensionInstalled.some(ext => this._extensionEnablementService.getEnablementState(ext) === EnablementState.DisabledByUnification);\r\n\r\n\t\treturn !!chatExtension && completionsExtensionDisabledByUnification;\r\n\t}\r\n}\r\n\r\nclass InlineCompletionsUnificationState implements IInlineCompletionsUnificationState {\r\n\tconstructor(\r\n\t\tpublic readonly codeUnification: boolean,\r\n\t\tpublic readonly modelUnification: boolean,\r\n\t\tpublic readonly extensionUnification: boolean,\r\n\t\tpublic readonly expAssignments: string[]\r\n\t) {\r\n\t}\r\n\r\n\tequals(other: IInlineCompletionsUnificationState): boolean {\r\n\t\treturn this.codeUnification === other.codeUnification\r\n\t\t\t&& this.modelUnification === other.modelUnification\r\n\t\t\t&& this.extensionUnification === other.extensionUnification\r\n\t\t\t&& equals(this.expAssignments, other.expAssignments);\r\n\t}\r\n}\r\n\r\nregisterSingleton(IInlineCompletionsUnificationService, InlineCompletionsUnificationImpl, InstantiationType.Delayed);\r\n","time":1770025681623},{"kind":"opened","id":26,"time":1770025681623},{"kind":"selectionChanged","id":26,"selection":[[7608,7608]],"time":1770027110908},{"kind":"selectionChanged","id":26,"selection":[[7606,7606]],"time":1770027111379},{"kind":"documentEncountered","id":27,"relativePath":"src\\vs\\workbench\\contrib\\chat\\browser\\agentSessions\\agentSessions.ts","time":1770027130844},{"kind":"setContent","id":27,"v":1,"content":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport { localize } from '../../../../../nls.js';\r\nimport { Codicon } from '../../../../../base/common/codicons.js';\r\nimport { URI } from '../../../../../base/common/uri.js';\r\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\r\nimport { IChatSessionTiming } from '../../common/chatService/chatService.js';\r\nimport { foreground, listActiveSelectionForeground, registerColor, transparent } from '../../../../../platform/theme/common/colorRegistry.js';\r\nimport { getChatSessionType } from '../../common/model/chatUri.js';\r\nimport { IChatSessionsExtensionPoint, IChatSessionsService, localChatSessionType } from '../../common/chatSessionsService.js';\r\n\r\nexport type AgentSessionProviderType = string;\r\n\r\nexport const LocalSessionProvider: IChatSessionsExtensionPoint = {\r\n\ttype: localChatSessionType,\r\n\ticon: `(${Codicon.vm.id})`,\r\n\tname: localize('chat.session.providerName.local', \"local\"),\r\n\tdisplayName: localize('chat.session.providerDisplayName.local', \"Local\"),\r\n\tdescription: localize('chat.session.providerDescription.local', \"Run tasks within VS Code chat. The agent iterates via chat and works interactively to implement changes on your main workspace.\"),\r\n\tcanDelegate: true,\r\n};\r\n\r\nexport const firstPartyAgentSessionProviders: AgentSessionProviderType[] = [\r\n\tLocalSessionProvider.type,\r\n\t'copilot-cloud-agent',\r\n\t'copilotcli',\r\n];\r\n\r\nexport function isBuiltInAgentSessionProvider(provider: AgentSessionProviderType): boolean {\r\n\treturn provider === LocalSessionProvider.type;\r\n}\r\n\r\nexport function isFirstPartyAgentSessionProvider(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): boolean {\r\n\tif (isBuiltInAgentSessionProvider(provider)) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tconst contribution = getSessionProviderContribution(provider, chatSessionsService);\r\n\treturn firstPartyAgentSessionProviders.includes(contribution.type);\r\n}\r\n\r\nfunction getSessionProviderContribution(provider: AgentSessionProviderType, contributions: IChatSessionsService): IChatSessionsExtensionPoint {\r\n\tswitch (provider) {\r\n\t\tcase LocalSessionProvider.type:\r\n\t\t\treturn LocalSessionProvider;\r\n\t\tdefault: {\r\n\t\t\tconst contribution = contributions.getChatSessionContribution(provider);\r\n\t\t\tif (!contribution) {\r\n\t\t\t\tthrow new Error(`No contribution found for provider ${provider}`);\r\n\t\t\t}\r\n\t\t\treturn contribution;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function getAgentSessionProvider(sessionResource: URI | string): AgentSessionProviderType | undefined {\r\n\tif (URI.isUri(sessionResource)) {\r\n\t\treturn getChatSessionType(sessionResource);\r\n\t}\r\n\r\n\treturn sessionResource; // TODO: validate with contributions\r\n}\r\n\r\nexport function getAgentSessionProviderName(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): string {\r\n\treturn getSessionProviderContribution(provider, chatSessionsService).displayName;\r\n}\r\n\r\nexport function getAgentSessionProviderDescription(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): string {\r\n\treturn getSessionProviderContribution(provider, chatSessionsService).description;\r\n}\r\n\r\nexport function getAgentSessionProviderIcon(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): ThemeIcon {\r\n\tconst icon = chatSessionsService.getIconForSessionType(provider);\r\n\tif (icon === undefined) {\r\n\t\treturn Codicon.question;\r\n\t}\r\n\r\n\tif (ThemeIcon.isThemeIcon(icon)) {\r\n\t\treturn icon;\r\n\t}\r\n\r\n\treturn Codicon.code;\r\n}\r\n\r\nexport function getAgentCanContinueIn(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): boolean {\r\n\treturn getSessionProviderContribution(provider, chatSessionsService).canDelegate ?? false;\r\n}\r\n\r\nexport enum AgentSessionsViewerOrientation {\r\n\tStacked = 1,\r\n\tSideBySide,\r\n}\r\n\r\nexport enum AgentSessionsViewerPosition {\r\n\tLeft = 1,\r\n\tRight,\r\n}\r\n\r\nexport interface IAgentSessionsControl {\r\n\r\n\treadonly element: HTMLElement | undefined;\r\n\r\n\trefresh(): void;\r\n\topenFind(): void;\r\n\r\n\treveal(sessionResource: URI): boolean;\r\n\r\n\tclearFocus(): void;\r\n\thasFocusOrSelection(): boolean;\r\n}\r\n\r\nexport const agentSessionReadIndicatorForeground = registerColor(\r\n\t'agentSessionReadIndicator.foreground',\r\n\t{ dark: transparent(foreground, 0.15), light: transparent(foreground, 0.15), hcDark: null, hcLight: null },\r\n\tlocalize('agentSessionReadIndicatorForeground', \"Foreground color for the read indicator in an agent session.\")\r\n);\r\n\r\nexport const agentSessionSelectedBadgeBorder = registerColor(\r\n\t'agentSessionSelectedBadge.border',\r\n\t{ dark: transparent(listActiveSelectionForeground, 0.3), light: transparent(listActiveSelectionForeground, 0.3), hcDark: foreground, hcLight: foreground },\r\n\tlocalize('agentSessionSelectedBadgeBorder', \"Border color for the badges in selected agent session items.\")\r\n);\r\n\r\nexport const agentSessionSelectedUnfocusedBadgeBorder = registerColor(\r\n\t'agentSessionSelectedUnfocusedBadge.border',\r\n\t{ dark: transparent(foreground, 0.3), light: transparent(foreground, 0.3), hcDark: foreground, hcLight: foreground },\r\n\tlocalize('agentSessionSelectedUnfocusedBadgeBorder', \"Border color for the badges in selected agent session items when the view is unfocused.\")\r\n);\r\n\r\nexport const AGENT_SESSION_RENAME_ACTION_ID = 'agentSession.rename';\r\nexport const AGENT_SESSION_DELETE_ACTION_ID = 'agentSession.delete';\r\n\r\nexport function getAgentSessionTime(timing: IChatSessionTiming): number {\r\n\treturn timing.lastRequestEnded ?? timing.lastRequestStarted ?? timing.created;\r\n}\r\n","time":1770027130844},{"kind":"opened","id":27,"time":1770027130844},{"kind":"selectionChanged","id":27,"selection":[[604,604]],"time":1770027131161},{"kind":"selectionChanged","id":27,"selection":[[1074,1074]],"time":1770027135127},{"kind":"selectionChanged","id":27,"selection":[[637,637]],"time":1770027149561},{"kind":"selectionChanged","id":27,"selection":[[932,932]],"time":1770027151725},{"kind":"selectionChanged","id":27,"selection":[[3214,3214]],"time":1770027390629},{"kind":"selectionChanged","id":27,"selection":[[1074,1074]],"time":1770027390706},{"kind":"selectionChanged","id":27,"selection":[[1563,1563]],"time":1770027391477},{"kind":"selectionChanged","id":27,"selection":[[1713,1713]],"time":1770027393494},{"kind":"selectionChanged","id":27,"selection":[[1563,1563]],"time":1770027394458},{"kind":"selectionChanged","id":27,"selection":[[1865,1865]],"time":1770027409493},{"kind":"documentEncountered","id":28,"relativePath":"src\\vs\\workbench\\contrib\\chat\\browser\\actions\\chatContinueInAction.ts","time":1770027412292},{"kind":"setContent","id":28,"v":1,"content":"/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport { Codicon } from '../../../../../base/common/codicons.js';\r\nimport { h } from '../../../../../base/browser/dom.js';\r\nimport { Disposable, IDisposable, markAsSingleton } from '../../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../../base/common/network.js';\r\nimport { basename } from '../../../../../base/common/resources.js';\r\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\r\nimport { URI } from '../../../../../base/common/uri.js';\r\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\r\nimport { isITextModel } from '../../../../../editor/common/model.js';\r\nimport { localize, localize2 } from '../../../../../nls.js';\r\nimport { ActionWidgetDropdownActionViewItem } from '../../../../../platform/actions/browser/actionWidgetDropdownActionViewItem.js';\r\nimport { IActionViewItemService } from '../../../../../platform/actions/browser/actionViewItemService.js';\r\nimport { Action2, MenuId, MenuItemAction } from '../../../../../platform/actions/common/actions.js';\r\nimport { IActionWidgetService } from '../../../../../platform/actionWidget/browser/actionWidget.js';\r\nimport { IActionWidgetDropdownAction, IActionWidgetDropdownActionProvider } from '../../../../../platform/actionWidget/browser/actionWidgetDropdown.js';\r\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\r\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\r\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\r\nimport { IWorkbenchContribution } from '../../../../common/contributions.js';\r\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\r\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\r\nimport { IChatAgentService } from '../../common/participants/chatAgents.js';\r\nimport { ChatContextKeys } from '../../common/actions/chatContextKeys.js';\r\nimport { chatEditingWidgetFileStateContextKey, ModifiedFileEntryState } from '../../common/editing/chatEditingService.js';\r\nimport { ChatModel } from '../../common/model/chatModel.js';\r\nimport { ChatRequestParser } from '../../common/requestParser/chatRequestParser.js';\r\nimport { IChatService } from '../../common/chatService/chatService.js';\r\nimport { IChatSessionsExtensionPoint, IChatSessionsService } from '../../common/chatSessionsService.js';\r\nimport { ChatAgentLocation } from '../../common/constants.js';\r\nimport { PROMPT_LANGUAGE_ID } from '../../common/promptSyntax/promptTypes.js';\r\nimport { AgentSessionProviders, getAgentSessionProviderIcon, getAgentSessionProviderName } from '../agentSessions/agentSessions.js';\r\nimport { IChatWidget, IChatWidgetService } from '../chat.js';\r\nimport { ctxHasEditorModification } from '../chatEditing/chatEditingEditorContextKeys.js';\r\nimport { CHAT_SETUP_ACTION_ID } from './chatActions.js';\r\nimport { PromptFileVariableKind, toPromptFileVariableEntry } from '../../common/attachments/chatVariableEntries.js';\r\n\r\nexport const enum ActionLocation {\r\n\tChatWidget = 'chatWidget',\r\n\tEditor = 'editor'\r\n}\r\n\r\nexport class ContinueChatInSessionAction extends Action2 {\r\n\r\n\tstatic readonly ID = 'workbench.action.chat.continueChatInSession';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tid: ContinueChatInSessionAction.ID,\r\n\t\t\ttitle: localize2('continueChatInSession', \"Continue Chat in...\"),\r\n\t\t\ttooltip: localize('continueChatInSession', \"Continue Chat in...\"),\r\n\t\t\tprecondition: ContextKeyExpr.and(\r\n\t\t\t\tChatContextKeys.enabled,\r\n\t\t\t\tChatContextKeys.requestInProgress.negate(),\r\n\t\t\t\tChatContextKeys.remoteJobCreating.negate(),\r\n\t\t\t\tChatContextKeys.hasCanDelegateProviders,\r\n\t\t\t),\r\n\t\t\tmenu: [{\r\n\t\t\t\tid: MenuId.ChatExecute,\r\n\t\t\t\tgroup: 'navigation',\r\n\t\t\t\torder: 3.4,\r\n\t\t\t\twhen: ContextKeyExpr.and(\r\n\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate(),\r\n\t\t\t\t\tChatContextKeys.hasCanDelegateProviders,\r\n\t\t\t\t),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tid: MenuId.EditorContent,\r\n\t\t\t\tgroup: 'continueIn',\r\n\t\t\t\twhen: ContextKeyExpr.and(\r\n\t\t\t\t\tContextKeyExpr.equals(ResourceContextKey.Scheme.key, Schemas.untitled),\r\n\t\t\t\t\tContextKeyExpr.equals(ResourceContextKey.LangId.key, PROMPT_LANGUAGE_ID),\r\n\t\t\t\t\tContextKeyExpr.notEquals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\r\n\t\t\t\t\tctxHasEditorModification.negate(),\r\n\t\t\t\t\tChatContextKeys.hasCanDelegateProviders,\r\n\t\t\t\t),\r\n\t\t\t}\r\n\t\t\t]\r\n\t\t});\r\n\t}\r\n\r\n\toverride async run(): Promise<void> {\r\n\t\t// Handled by a custom action item\r\n\t}\r\n}\r\nexport class ChatContinueInSessionActionItem extends ActionWidgetDropdownActionViewItem {\r\n\tconstructor(\r\n\t\taction: MenuItemAction,\r\n\t\tprivate readonly location: ActionLocation,\r\n\t\t@IActionWidgetService actionWidgetService: IActionWidgetService,\r\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\r\n\t\t@IKeybindingService keybindingService: IKeybindingService,\r\n\t\t@IChatSessionsService chatSessionsService: IChatSessionsService,\r\n\t\t@IInstantiationService instantiationService: IInstantiationService,\r\n\t\t@IOpenerService openerService: IOpenerService,\r\n\t\t@ITelemetryService telemetryService: ITelemetryService\r\n\t) {\r\n\t\tsuper(action, {\r\n\t\t\tactionProvider: ChatContinueInSessionActionItem.actionProvider(chatSessionsService, instantiationService, location),\r\n\t\t\tactionBarActions: ChatContinueInSessionActionItem.getActionBarActions(openerService),\r\n\t\t\treporter: { id: 'ChatContinueInSession', name: 'ChatContinueInSession', includeOptions: true },\r\n\t\t}, actionWidgetService, keybindingService, contextKeyService, telemetryService);\r\n\t}\r\n\r\n\tprotected static getActionBarActions(openerService: IOpenerService) {\r\n\t\tconst learnMoreUrl = 'https://aka.ms/vscode-continue-chat-in';\r\n\t\treturn [{\r\n\t\t\tid: 'workbench.action.chat.continueChatInSession.learnMore',\r\n\t\t\tlabel: localize('chat.learnMore', \"Learn More\"),\r\n\t\t\ttooltip: localize('chat.learnMore', \"Learn More\"),\r\n\t\t\tclass: undefined,\r\n\t\t\tenabled: true,\r\n\t\t\trun: async () => {\r\n\t\t\t\tawait openerService.open(URI.parse(learnMoreUrl));\r\n\t\t\t}\r\n\t\t}];\r\n\t}\r\n\r\n\tprivate static actionProvider(chatSessionsService: IChatSessionsService, instantiationService: IInstantiationService, location: ActionLocation): IActionWidgetDropdownActionProvider {\r\n\t\treturn {\r\n\t\t\tgetActions: () => {\r\n\t\t\t\tconst actions: IActionWidgetDropdownAction[] = [];\r\n\t\t\t\tconst contributions = chatSessionsService.getAllChatSessionContributions();\r\n\r\n\t\t\t\t// Continue in Background\r\n\t\t\t\tconst backgroundContrib = contributions.find(contrib => contrib.type === AgentSessionProviders.Background);\r\n\t\t\t\tif (backgroundContrib && backgroundContrib.canDelegate !== false) {\r\n\t\t\t\t\tactions.push(this.toAction(AgentSessionProviders.Background, backgroundContrib, instantiationService, location));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Continue in Cloud\r\n\t\t\t\tconst cloudContrib = contributions.find(contrib => contrib.type === AgentSessionProviders.Cloud);\r\n\t\t\t\tif (cloudContrib && cloudContrib.canDelegate !== false) {\r\n\t\t\t\t\tactions.push(this.toAction(AgentSessionProviders.Cloud, cloudContrib, instantiationService, location));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Offer actions to enter setup if we have no contributions\r\n\t\t\t\tif (actions.length === 0) {\r\n\t\t\t\t\tactions.push(this.toSetupAction(AgentSessionProviders.Background, instantiationService));\r\n\t\t\t\t\tactions.push(this.toSetupAction(AgentSessionProviders.Cloud, instantiationService));\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn actions;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tprivate static toAction(provider: AgentSessionProviders, contrib: IChatSessionsExtensionPoint, instantiationService: IInstantiationService, location: ActionLocation): IActionWidgetDropdownAction {\r\n\t\treturn {\r\n\t\t\tid: contrib.type,\r\n\t\t\tenabled: true,\r\n\t\t\ticon: getAgentSessionProviderIcon(provider),\r\n\t\t\tclass: undefined,\r\n\t\t\tdescription: `@${contrib.name}`,\r\n\t\t\tlabel: getAgentSessionProviderName(provider),\r\n\t\t\ttooltip: localize('continueSessionIn', \"Continue in {0}\", getAgentSessionProviderName(provider)),\r\n\t\t\tcategory: { label: localize('continueIn', \"Continue In\"), order: 0, showHeader: true },\r\n\t\t\trun: () => instantiationService.invokeFunction(accessor => {\r\n\t\t\t\tif (location === ActionLocation.Editor) {\r\n\t\t\t\t\treturn new CreateRemoteAgentJobFromEditorAction().run(accessor, contrib);\r\n\t\t\t\t}\r\n\t\t\t\treturn new CreateRemoteAgentJobAction().run(accessor, contrib);\r\n\t\t\t})\r\n\t\t};\r\n\t}\r\n\r\n\tprivate static toSetupAction(provider: AgentSessionProviders, instantiationService: IInstantiationService): IActionWidgetDropdownAction {\r\n\t\treturn {\r\n\t\t\tid: provider,\r\n\t\t\tenabled: true,\r\n\t\t\ticon: getAgentSessionProviderIcon(provider),\r\n\t\t\tclass: undefined,\r\n\t\t\tlabel: getAgentSessionProviderName(provider),\r\n\t\t\ttooltip: localize('continueSessionIn', \"Continue in {0}\", getAgentSessionProviderName(provider)),\r\n\t\t\tcategory: { label: localize('continueIn', \"Continue In\"), order: 0, showHeader: true },\r\n\t\t\trun: () => instantiationService.invokeFunction(accessor => {\r\n\t\t\t\tconst commandService = accessor.get(ICommandService);\r\n\t\t\t\treturn commandService.executeCommand(CHAT_SETUP_ACTION_ID);\r\n\t\t\t})\r\n\t\t};\r\n\t}\r\n\r\n\tprotected override renderLabel(element: HTMLElement): IDisposable | null {\r\n\t\tif (this.location === ActionLocation.Editor) {\r\n\t\t\tconst view = h('span.action-widget-delegate-label', [\r\n\t\t\t\th('span', { className: ThemeIcon.asClassName(Codicon.forward) }),\r\n\t\t\t\th('span', [localize('continueInEllipsis', \"Continue in...\")])\r\n\t\t\t]);\r\n\t\t\telement.appendChild(view.root);\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tconst icon = this.contextKeyService.contextMatchesRules(ChatContextKeys.remoteJobCreating) ? Codicon.sync : Codicon.forward;\r\n\t\t\telement.classList.add(...ThemeIcon.asClassNameArray(icon));\r\n\t\t\treturn super.renderLabel(element);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst NEW_CHAT_SESSION_ACTION_ID = 'workbench.action.chat.openNewSessionEditor';\r\n\r\nexport class CreateRemoteAgentJobAction {\r\n\tconstructor() { }\r\n\r\n\tprivate openUntitledEditor(commandService: ICommandService, continuationTarget: IChatSessionsExtensionPoint) {\r\n\t\tcommandService.executeCommand(`${NEW_CHAT_SESSION_ACTION_ID}.${continuationTarget.type}`);\r\n\t}\r\n\r\n\tasync run(accessor: ServicesAccessor, continuationTarget: IChatSessionsExtensionPoint, _widget?: IChatWidget) {\r\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\r\n\t\tconst commandService = accessor.get(ICommandService);\r\n\t\tconst widgetService = accessor.get(IChatWidgetService);\r\n\t\tconst chatAgentService = accessor.get(IChatAgentService);\r\n\t\tconst chatService = accessor.get(IChatService);\r\n\t\tconst editorService = accessor.get(IEditorService);\r\n\r\n\t\tconst remoteJobCreatingKey = ChatContextKeys.remoteJobCreating.bindTo(contextKeyService);\r\n\r\n\t\ttry {\r\n\t\t\tremoteJobCreatingKey.set(true);\r\n\r\n\t\t\tconst widget = _widget ?? widgetService.lastFocusedWidget;\r\n\t\t\tif (!widget || !widget.viewModel) {\r\n\t\t\t\treturn this.openUntitledEditor(commandService, continuationTarget);\r\n\t\t\t}\r\n\r\n\t\t\t// todo@connor4312: remove 'as' cast\r\n\t\t\tconst chatModel = widget.viewModel.model as ChatModel;\r\n\t\t\tif (!chatModel) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst sessionResource = widget.viewModel.sessionResource;\r\n\t\t\tconst chatRequests = chatModel.getRequests();\r\n\t\t\tlet userPrompt = widget.getInput();\r\n\t\t\tif (!userPrompt) {\r\n\t\t\t\tif (!chatRequests.length) {\r\n\t\t\t\t\treturn this.openUntitledEditor(commandService, continuationTarget);\r\n\t\t\t\t}\r\n\t\t\t\tuserPrompt = 'implement this.';\r\n\t\t\t}\r\n\r\n\t\t\tconst attachedContext = widget.input.getAttachedAndImplicitContext(sessionResource);\r\n\t\t\twidget.input.acceptInput(true);\r\n\r\n\t\t\t// For inline editor mode, add selection or cursor information\r\n\t\t\tif (widget.location === ChatAgentLocation.EditorInline) {\r\n\t\t\t\tconst activeEditor = editorService.activeTextEditorControl;\r\n\t\t\t\tif (activeEditor) {\r\n\t\t\t\t\tconst model = activeEditor.getModel();\r\n\t\t\t\t\tlet activeEditorUri: URI | undefined = undefined;\r\n\t\t\t\t\tif (model && isITextModel(model)) {\r\n\t\t\t\t\t\tactiveEditorUri = model.uri as URI;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst selection = activeEditor.getSelection();\r\n\t\t\t\t\tif (activeEditorUri && selection) {\r\n\t\t\t\t\t\tattachedContext.add({\r\n\t\t\t\t\t\t\tkind: 'file',\r\n\t\t\t\t\t\t\tid: 'vscode.implicit.selection',\r\n\t\t\t\t\t\t\tname: basename(activeEditorUri),\r\n\t\t\t\t\t\t\tvalue: {\r\n\t\t\t\t\t\t\t\turi: activeEditorUri,\r\n\t\t\t\t\t\t\t\trange: selection\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst defaultAgent = chatAgentService.getDefaultAgent(ChatAgentLocation.Chat);\r\n\t\t\tconst instantiationService = accessor.get(IInstantiationService);\r\n\t\t\tconst requestParser = instantiationService.createInstance(ChatRequestParser);\r\n\t\t\tconst continuationTargetType = continuationTarget.type;\r\n\r\n\t\t\t// Add the request to the model first\r\n\t\t\tconst parsedRequest = requestParser.parseChatRequest(sessionResource, userPrompt, ChatAgentLocation.Chat);\r\n\t\t\tconst addedRequest = chatModel.addRequest(\r\n\t\t\t\tparsedRequest,\r\n\t\t\t\t{ variables: attachedContext.asArray() },\r\n\t\t\t\t0,\r\n\t\t\t\tundefined,\r\n\t\t\t\tdefaultAgent\r\n\t\t\t);\r\n\r\n\t\t\tawait chatService.removeRequest(sessionResource, addedRequest.id);\r\n\t\t\tconst requestData = await chatService.sendRequest(sessionResource, userPrompt, {\r\n\t\t\t\tagentIdSilent: continuationTargetType,\r\n\t\t\t\tattachedContext: attachedContext.asArray(),\r\n\t\t\t\tuserSelectedModelId: widget.input.currentLanguageModel,\r\n\t\t\t\t...widget.getModeRequestOptions()\r\n\t\t\t});\r\n\r\n\t\t\tif (requestData) {\r\n\t\t\t\tawait widget.handleDelegationExitIfNeeded(defaultAgent, requestData.agent);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Error creating remote coding agent job', e);\r\n\t\t\tthrow e;\r\n\t\t} finally {\r\n\t\t\tremoteJobCreatingKey.set(false);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass CreateRemoteAgentJobFromEditorAction {\r\n\tconstructor() { }\r\n\r\n\tasync run(accessor: ServicesAccessor, continuationTarget: IChatSessionsExtensionPoint) {\r\n\r\n\t\ttry {\r\n\t\t\tconst editorService = accessor.get(IEditorService);\r\n\t\t\tconst activeEditor = editorService.activeTextEditorControl;\r\n\t\t\tconst commandService = accessor.get(ICommandService);\r\n\r\n\t\t\tif (!activeEditor) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst model = activeEditor.getModel();\r\n\t\t\tif (!model || !isITextModel(model)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst uri = model.uri;\r\n\t\t\tconst attachedContext = [toPromptFileVariableEntry(uri, PromptFileVariableKind.PromptFile, undefined, false, [])];\r\n\t\t\tconst prompt = `Follow instructions in [${basename(uri)}](${uri.toString()}).`;\r\n\t\t\tawait commandService.executeCommand(`${NEW_CHAT_SESSION_ACTION_ID}.${continuationTarget.type}`, { prompt, attachedContext });\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error('Error creating remote agent job from editor', e);\r\n\t\t\tthrow e;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class ContinueChatInSessionActionRendering extends Disposable implements IWorkbenchContribution {\r\n\r\n\tstatic readonly ID = 'chat.continueChatInSessionActionRendering';\r\n\r\n\tconstructor(\r\n\t\t@IActionViewItemService actionViewItemService: IActionViewItemService,\r\n\t\t@IInstantiationService instantiationService: IInstantiationService,\r\n\t) {\r\n\t\tsuper();\r\n\t\tconst disposable = actionViewItemService.register(MenuId.EditorContent, ContinueChatInSessionAction.ID, (action, options, instantiationService2) => {\r\n\t\t\tif (!(action instanceof MenuItemAction)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\treturn instantiationService.createInstance(ChatContinueInSessionActionItem, action, ActionLocation.Editor);\r\n\t\t});\r\n\t\tmarkAsSingleton(disposable);\r\n\t}\r\n}\r\n","time":1770027412292},{"kind":"opened","id":28,"time":1770027412292},{"kind":"selectionChanged","id":28,"selection":[[8276,8276]],"time":1770027412318},{"kind":"selectionChanged","id":28,"selection":[[8077,8077]],"time":1770027417515},{"kind":"selectionChanged","id":28,"selection":[[8246,8246]],"time":1770027446002},{"kind":"selectionChanged","id":28,"selection":[[8075,8075]],"time":1770027449569},{"kind":"selectionChanged","id":28,"selection":[[8035,8035]],"time":1770027451590},{"kind":"selectionChanged","id":28,"selection":[[7317,7317]],"time":1770027456995},{"kind":"selectionChanged","id":28,"selection":[[7094,7094]],"time":1770027461472},{"kind":"selectionChanged","id":28,"selection":[[8314,8314]],"time":1770027478017},{"kind":"selectionChanged","id":28,"selection":[[8289,8289]],"time":1770027480295},{"kind":"selectionChanged","id":28,"selection":[[8076,8076]],"time":1770027481513},{"kind":"selectionChanged","id":28,"selection":[[8073,8080]],"time":1770027481670},{"kind":"selectionChanged","id":28,"selection":[[8087,8087]],"time":1770027482598},{"kind":"selectionChanged","id":28,"selection":[[8082,8109]],"time":1770027482740},{"kind":"selectionChanged","id":28,"selection":[[8295,8295]],"time":1770027490043},{"kind":"selectionChanged","id":27,"selection":[[3447,3447]],"time":1770027490162},{"kind":"selectionChanged","id":27,"selection":[[3753,3753]],"time":1770027491012},{"kind":"selectionChanged","id":27,"selection":[[3749,3749]],"time":1770027491699},{"kind":"selectionChanged","id":27,"selection":[[3429,3429]],"time":1770027506912},{"kind":"selectionChanged","id":27,"selection":[[3431,3431]],"time":1770027512718},{"kind":"changed","id":27,"v":17,"edit":[[3431,3431,"export function getAgentSessionProviderIcon(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): ThemeIcon {\r\n"]],"time":1770027515984},{"kind":"selectionChanged","id":27,"selection":[[3568,3568]],"time":1770027515996},{"kind":"selectionChanged","id":27,"selection":[[3566,3566]],"time":1770027516740},{"kind":"selectionChanged","id":27,"selection":[[3565,3566]],"time":1770027517537},{"kind":"selectionChanged","id":27,"selection":[[3555,3566]],"time":1770027517674},{"kind":"selectionChanged","id":27,"selection":[[3552,3566]],"time":1770027517912},{"kind":"selectionChanged","id":27,"selection":[[3553,3566]],"time":1770027518382},{"kind":"changed","id":27,"v":24,"edit":[[3553,3566,","]],"time":1770027519132},{"kind":"selectionChanged","id":27,"selection":[[3554,3554]],"time":1770027519137},{"kind":"selectionChanged","id":27,"selection":[[3550,3550]],"time":1770027520699},{"kind":"selectionChanged","id":27,"selection":[[3532,3552]],"time":1770027520833},{"kind":"selectionChanged","id":27,"selection":[[3552,3552]],"time":1770027522825},{"kind":"selectionChanged","id":27,"selection":[[3553,3553]],"time":1770027522981},{"kind":"selectionChanged","id":27,"selection":[[3683,3683]],"time":1770027524081},{"kind":"selectionChanged","id":27,"selection":[[3680,3689]],"time":1770027524227},{"kind":"selectionChanged","id":27,"selection":[[3553,3553]],"time":1770027524925},{"kind":"changed","id":27,"v":33,"edit":[[3553,3553,":"]],"time":1770027525688},{"kind":"selectionChanged","id":27,"selection":[[3554,3554]],"time":1770027525699},{"kind":"changed","id":27,"v":35,"edit":[[3554,3554,"ThemeIcon"]],"time":1770027526038},{"kind":"selectionChanged","id":27,"selection":[[3563,3563]],"time":1770027526040},{"kind":"changed","id":27,"v":37,"edit":[[3554,3554," "]],"time":1770027526687},{"kind":"selectionChanged","id":27,"selection":[[3564,3564]],"time":1770027526691},{"kind":"selectionChanged","id":27,"selection":[[3567,3567]],"time":1770027529884},{"kind":"changed","id":27,"v":40,"edit":[[3567,3567,"export function getAgentSessionProviderIcon(provider: AgentSessionProviderType, chatSessionsService: IChatSessionsService): ThemeIcon {\r\n"]],"time":1770027530571},{"kind":"selectionChanged","id":27,"selection":[[3704,3704]],"time":1770027530579},{"kind":"selectionChanged","id":27,"selection":[[3702,3702]],"time":1770027532627},{"kind":"selectionChanged","id":27,"selection":[[3701,3702]],"time":1770027532684},{"kind":"selectionChanged","id":27,"selection":[[3700,3702]],"time":1770027533221},{"kind":"changed","id":27,"v":45,"edit":[[3700,3702,","]],"time":1770027534224},{"kind":"selectionChanged","id":27,"selection":[[3701,3701]],"time":1770027534227},{"kind":"selectionChanged","id":27,"selection":[[3565,3565]],"time":1770027534851},{"kind":"selectionChanged","id":27,"selection":[[3491,3491]],"time":1770027536102},{"kind":"selectionChanged","id":27,"selection":[[3485,3509]],"time":1770027536244},{"kind":"selectionChanged","id":28,"selection":[[8295,8295]],"time":1770027538565},{"kind":"selectionChanged","id":28,"selection":[[8091,8091]],"time":1770027540809},{"kind":"selectionChanged","id":28,"selection":[[8082,8109]],"time":1770027540978},{"kind":"selectionChanged","id":28,"selection":[[7094,7094]],"time":1770027543649},{"kind":"selectionChanged","id":28,"selection":[[8082,8109]],"time":1770027544576},{"kind":"selectionChanged","id":27,"selection":[[3485,3509]],"time":1770027544781},{"kind":"changed","id":27,"v":51,"edit":[[3485,3509,"IChatSessionsExtensionPoint"]],"time":1770027546466},{"kind":"selectionChanged","id":27,"selection":[[3512,3512]],"time":1770027546470},{"kind":"selectionChanged","id":27,"selection":[[3512,3513]],"time":1770027549765},{"kind":"selectionChanged","id":27,"selection":[[3512,3533]],"time":1770027550048},{"kind":"selectionChanged","id":27,"selection":[[3512,3534]],"time":1770027550286},{"kind":"selectionChanged","id":27,"selection":[[3512,3555]],"time":1770027550617},{"kind":"changed","id":27,"v":57,"edit":[[3512,3555,""]],"time":1770027551017},{"kind":"selectionChanged","id":27,"selection":[[3512,3512]],"time":1770027551023},{"kind":"selectionChanged","id":27,"selection":[[3429,3429]],"time":1770027551989},{"kind":"selectionChanged","id":27,"selection":[[3492,3492]],"time":1770027553827},{"kind":"selectionChanged","id":27,"selection":[[3485,3512]],"time":1770027553977},{"kind":"selectionChanged","id":27,"selection":[[3741,3741]],"time":1770027555046},{"kind":"changed","id":27,"v":63,"edit":[[3741,3741," "]],"time":1770027555655},{"kind":"selectionChanged","id":27,"selection":[[3742,3742]],"time":1770027555662},{"kind":"changed","id":27,"v":65,"edit":[[3742,3742,"|"]],"time":1770027555934},{"kind":"selectionChanged","id":27,"selection":[[3743,3743]],"time":1770027555938},{"kind":"changed","id":27,"v":67,"edit":[[3743,3743," "]],"time":1770027556032},{"kind":"selectionChanged","id":27,"selection":[[3744,3744]],"time":1770027556034},{"kind":"changed","id":27,"v":69,"edit":[[3744,3744,"IChatSessionsExtensionPoint"]],"time":1770027556451},{"kind":"selectionChanged","id":27,"selection":[[3771,3771]],"time":1770027556455},{"kind":"selectionChanged","id":27,"selection":[[3792,3792]],"time":1770027559288},{"kind":"changed","id":27,"v":72,"edit":[[3792,3792,"?"]],"time":1770027560078},{"kind":"selectionChanged","id":27,"selection":[[3793,3793]],"time":1770027560082},{"kind":"selectionChanged","id":27,"selection":[[3525,3525]],"time":1770027562024},{"kind":"changed","id":27,"v":75,"edit":[[3524,3525,""]],"time":1770027562764},{"kind":"selectionChanged","id":27,"selection":[[3524,3524]],"time":1770027562767},{"kind":"changed","id":27,"v":77,"edit":[[3524,3524,";"]],"time":1770027563120},{"kind":"selectionChanged","id":27,"selection":[[3525,3525]],"time":1770027563125},{"kind":"selectionChanged","id":27,"selection":[[3661,3661]],"time":1770027564280},{"kind":"changed","id":27,"v":80,"edit":[[3660,3661,""]],"time":1770027564868},{"kind":"selectionChanged","id":27,"selection":[[3660,3660]],"time":1770027564871},{"kind":"changed","id":27,"v":82,"edit":[[3660,3660,";"]],"time":1770027565211},{"kind":"selectionChanged","id":27,"selection":[[3661,3661]],"time":1770027565218},{"kind":"selectionChanged","id":27,"selection":[[3925,3925]],"time":1770027566264},{"kind":"selectionChanged","id":27,"selection":[[3897,3897]],"time":1770027566997},{"kind":"selectionChanged","id":27,"selection":[[3829,3829]],"time":1770027567373},{"kind":"changed","id":27,"v":87,"edit":[[3829,3829,"\r\n\tif (!chatSessionsService) {\r\n\t\treturn (provider as IChatSessionsExtensionPoint).icon;\r\n\t}"]],"time":1770027568116},{"kind":"selectionChanged","id":27,"selection":[[3921,3921]],"time":1770027568119},{"kind":"selectionChanged","id":27,"selection":[[3846,3846]],"time":1770027573669},{"kind":"selectionChanged","id":27,"selection":[[3837,3856]],"time":1770027573811},{"kind":"selectionChanged","id":27,"selection":[[3481,3481]],"time":1770027576457},{"kind":"selectionChanged","id":27,"selection":[[3475,3483]],"time":1770027576618},{"kind":"selectionChanged","id":27,"selection":[[3482,3482]],"time":1770027583162},{"kind":"selectionChanged","id":27,"selection":[[3715,3715]],"time":1770027586589},{"kind":"changed","id":27,"v":95,"edit":[[3715,3715,"O"]],"time":1770027587351},{"kind":"selectionChanged","id":27,"selection":[[3716,3716]],"time":1770027587360},{"kind":"changed","id":27,"v":97,"edit":[[3716,3716,"r"]],"time":1770027587544},{"kind":"selectionChanged","id":27,"selection":[[3717,3717]],"time":1770027587553},{"kind":"changed","id":27,"v":99,"edit":[[3717,3717,"E"]],"time":1770027591740},{"kind":"selectionChanged","id":27,"selection":[[3718,3718]],"time":1770027591750},{"kind":"changed","id":27,"v":101,"edit":[[3718,3718,"x"]],"time":1770027593800},{"kind":"selectionChanged","id":27,"selection":[[3719,3719]],"time":1770027593839},{"kind":"changed","id":27,"v":103,"edit":[[3719,3719,"t"]],"time":1770027595725},{"kind":"selectionChanged","id":27,"selection":[[3720,3720]],"time":1770027595728},{"kind":"changed","id":27,"v":105,"edit":[[3720,3720,"e"]],"time":1770027595894},{"kind":"selectionChanged","id":27,"selection":[[3721,3721]],"time":1770027595898},{"kind":"changed","id":27,"v":107,"edit":[[3721,3721,"n"]],"time":1770027596032},{"kind":"selectionChanged","id":27,"selection":[[3722,3722]],"time":1770027596036},{"kind":"changed","id":27,"v":109,"edit":[[3722,3722,"s"]],"time":1770027596156},{"kind":"selectionChanged","id":27,"selection":[[3723,3723]],"time":1770027596161},{"kind":"changed","id":27,"v":111,"edit":[[3723,3723,"i"]],"time":1770027596495},{"kind":"selectionChanged","id":27,"selection":[[3724,3724]],"time":1770027596505},{"kind":"changed","id":27,"v":113,"edit":[[3724,3724,"o"]],"time":1770027596732},{"kind":"selectionChanged","id":27,"selection":[[3725,3725]],"time":1770027596748},{"kind":"changed","id":27,"v":115,"edit":[[3725,3725,"n"]],"time":1770027596897},{"kind":"selectionChanged","id":27,"selection":[[3726,3726]],"time":1770027596900},{"kind":"changed","id":27,"v":117,"edit":[[3726,3726,"P"]],"time":1770027597260},{"kind":"selectionChanged","id":27,"selection":[[3727,3727]],"time":1770027597264},{"kind":"changed","id":27,"v":119,"edit":[[3727,3727,"o"]],"time":1770027597488},{"kind":"selectionChanged","id":27,"selection":[[3728,3728]],"time":1770027597492},{"kind":"changed","id":27,"v":121,"edit":[[3728,3728,"i"]],"time":1770027597685},{"kind":"selectionChanged","id":27,"selection":[[3729,3729]],"time":1770027597689},{"kind":"changed","id":27,"v":123,"edit":[[3729,3729,"n"]],"time":1770027597814},{"kind":"selectionChanged","id":27,"selection":[[3730,3730]],"time":1770027597818},{"kind":"changed","id":27,"v":125,"edit":[[3730,3730,"t"]],"time":1770027597920},{"kind":"selectionChanged","id":27,"selection":[[3731,3731]],"time":1770027597925},{"kind":"changed","id":27,"v":127,"edit":[[3730,3731,""]],"time":1770027599990},{"kind":"selectionChanged","id":27,"selection":[[3730,3730]],"time":1770027599996},{"kind":"changed","id":27,"v":129,"edit":[[3729,3730,""]],"time":1770027600500},{"kind":"selectionChanged","id":27,"selection":[[3729,3729]],"time":1770027600504},{"kind":"changed","id":27,"v":131,"edit":[[3728,3729,""]],"time":1770027600532},{"kind":"selectionChanged","id":27,"selection":[[3728,3728]],"time":1770027600537},{"kind":"changed","id":27,"v":133,"edit":[[3727,3728,""]],"time":1770027600567},{"kind":"selectionChanged","id":27,"selection":[[3727,3727]],"time":1770027600569},{"kind":"changed","id":27,"v":135,"edit":[[3726,3727,""]],"time":1770027600596},{"kind":"selectionChanged","id":27,"selection":[[3726,3726]],"time":1770027600600},{"kind":"changed","id":27,"v":137,"edit":[[3725,3726,""]],"time":1770027600623},{"kind":"selectionChanged","id":27,"selection":[[3725,3725]],"time":1770027600627},{"kind":"changed","id":27,"v":139,"edit":[[3724,3725,""]],"time":1770027600825},{"kind":"selectionChanged","id":27,"selection":[[3724,3724]],"time":1770027600830},{"kind":"changed","id":27,"v":141,"edit":[[3723,3724,""]],"time":1770027600948},{"kind":"selectionChanged","id":27,"selection":[[3723,3723]],"time":1770027600953},{"kind":"changed","id":27,"v":143,"edit":[[3722,3723,""]],"time":1770027601087},{"kind":"selectionChanged","id":27,"selection":[[3722,3722]],"time":1770027601091},{"kind":"changed","id":27,"v":145,"edit":[[3721,3722,""]],"time":1770027601237},{"kind":"selectionChanged","id":27,"selection":[[3721,3721]],"time":1770027601241},{"kind":"changed","id":27,"v":147,"edit":[[3720,3721,""]],"time":1770027601534},{"kind":"selectionChanged","id":27,"selection":[[3720,3720]],"time":1770027601543},{"kind":"changed","id":27,"v":149,"edit":[[3719,3720,""]],"time":1770027601659},{"kind":"selectionChanged","id":27,"selection":[[3719,3719]],"time":1770027601662},{"kind":"changed","id":27,"v":151,"edit":[[3718,3719,""]],"time":1770027601791},{"kind":"selectionChanged","id":27,"selection":[[3718,3718]],"time":1770027601795},{"kind":"changed","id":27,"v":153,"edit":[[3717,3718,""]],"time":1770027602135},{"kind":"selectionChanged","id":27,"selection":[[3717,3717]],"time":1770027602142},{"kind":"changed","id":27,"v":155,"edit":[[3717,3717,"C"]],"time":1770027602422},{"kind":"selectionChanged","id":27,"selection":[[3718,3718]],"time":1770027602427},{"kind":"changed","id":27,"v":157,"edit":[[3718,3718,"o"]],"time":1770027602598},{"kind":"selectionChanged","id":27,"selection":[[3719,3719]],"time":1770027602601},{"kind":"changed","id":27,"v":159,"edit":[[3719,3719,"n"]],"time":1770027602782},{"kind":"selectionChanged","id":27,"selection":[[3720,3720]],"time":1770027602788},{"kind":"changed","id":27,"v":161,"edit":[[3720,3720,"t"]],"time":1770027602927},{"kind":"selectionChanged","id":27,"selection":[[3721,3721]],"time":1770027602931},{"kind":"changed","id":27,"v":163,"edit":[[3721,3721,"r"]],"time":1770027602984},{"kind":"selectionChanged","id":27,"selection":[[3722,3722]],"time":1770027602999},{"kind":"changed","id":27,"v":165,"edit":[[3722,3722,"i"]],"time":1770027603066},{"kind":"selectionChanged","id":27,"selection":[[3723,3723]],"time":1770027603068},{"kind":"changed","id":27,"v":167,"edit":[[3723,3723,"b"]],"time":1770027603211},{"kind":"selectionChanged","id":27,"selection":[[3724,3724]],"time":1770027603213},{"kind":"changed","id":27,"v":169,"edit":[[3724,3724,"u"]],"time":1770027603343},{"kind":"selectionChanged","id":27,"selection":[[3725,3725]],"time":1770027603349},{"kind":"changed","id":27,"v":171,"edit":[[3725,3725,"t"]],"time":1770027603533},{"kind":"selectionChanged","id":27,"selection":[[3726,3726]],"time":1770027603540},{"kind":"changed","id":27,"v":173,"edit":[[3726,3726,"i"]],"time":1770027603640},{"kind":"selectionChanged","id":27,"selection":[[3727,3727]],"time":1770027603645},{"kind":"changed","id":27,"v":175,"edit":[[3727,3727,"o"]],"time":1770027603720},{"kind":"selectionChanged","id":27,"selection":[[3728,3728]],"time":1770027603723},{"kind":"changed","id":27,"v":177,"edit":[[3728,3728,"n"]],"time":1770027603862},{"kind":"selectionChanged","id":27,"selection":[[3729,3729]],"time":1770027603870},{"kind":"selectionChanged","id":27,"selection":[[3723,3723]],"time":1770027604769},{"kind":"selectionChanged","id":27,"selection":[[3707,3729]],"time":1770027604925},{"kind":"selectionChanged","id":27,"selection":[[3935,3935]],"time":1770027609028},{"kind":"selectionChanged","id":27,"selection":[[3876,3935]],"time":1770027609173},{"kind":"selectionChanged","id":27,"selection":[[3846,3935]],"time":1770027609321},{"kind":"changed","id":27,"v":184,"edit":[[3846,3935,""]],"time":1770027612272},{"kind":"selectionChanged","id":27,"selection":[[3846,3846]],"time":1770027612280},{"kind":"changed","id":27,"v":186,"edit":[[3845,3846,""]],"time":1770027613349},{"kind":"selectionChanged","id":27,"selection":[[3845,3845]],"time":1770027613357},{"kind":"changed","id":27,"v":188,"edit":[[3843,3845,""]],"time":1770027613550},{"kind":"selectionChanged","id":27,"selection":[[3843,3843]],"time":1770027613553},{"kind":"selectionChanged","id":27,"selection":[[3939,3939]],"time":1770027615676},{"kind":"selectionChanged","id":27,"selection":[[3712,3712]],"time":1770027617132},{"kind":"selectionChanged","id":27,"selection":[[3707,3729]],"time":1770027617258},{"kind":"selectionChanged","id":27,"selection":[[3859,3859]],"time":1770027619002},{"kind":"changed","id":27,"v":194,"edit":[[3859,3859,"providerOrContribution"]],"time":1770027620680},{"kind":"selectionChanged","id":27,"selection":[[3881,3881]],"time":1770027620682},{"kind":"selectionChanged","id":27,"selection":[[3859,3881]],"time":1770027632563},{"kind":"changed","id":27,"v":197,"edit":[[3859,3881,""]],"time":1770027633091},{"kind":"selectionChanged","id":27,"selection":[[3859,3859]],"time":1770027633096},{"kind":"selectionChanged","id":27,"selection":[[3488,3488]],"time":1770027636116},{"kind":"selectionChanged","id":27,"selection":[[3584,3584]],"time":1770027636666},{"kind":"selectionChanged","id":27,"selection":[[3581,3605]],"time":1770027637675},{"kind":"selectionChanged","id":27,"selection":[[3584,3584]],"time":1770027638647},{"kind":"selectionChanged","id":27,"selection":[[3581,3605]],"time":1770027638735},{"kind":"selectionChanged","id":27,"selection":[[3584,3584]],"time":1770027640094},{"kind":"selectionChanged","id":27,"selection":[[3581,3605]],"time":1770027640181},{"kind":"selectionChanged","id":27,"selection":[[3743,3743]],"time":1770027642020},{"kind":"selectionChanged","id":27,"selection":[[3731,3755]],"time":1770027642189},{"kind":"selectionChanged","id":27,"selection":[[3497,3497]],"time":1770027642751},{"kind":"selectionChanged","id":27,"selection":[[3485,3512]],"time":1770027642904},{"kind":"selectionChanged","id":27,"selection":[[3859,3859]],"time":1770027644260},{"kind":"changed","id":27,"v":211,"edit":[[3859,3859,"IChatSessionsExtensionPoint"]],"time":1770027645143},{"kind":"selectionChanged","id":27,"selection":[[3886,3886]],"time":1770027645149},{"kind":"changed","id":27,"v":213,"edit":[[3886,3886," "]],"time":1770027645289},{"kind":"selectionChanged","id":27,"selection":[[3887,3887]],"time":1770027645291},{"kind":"changed","id":27,"v":215,"edit":[[3887,3887,"i"]],"time":1770027645417},{"kind":"selectionChanged","id":27,"selection":[[3888,3888]],"time":1770027645423},{"kind":"changed","id":27,"v":217,"edit":[[3888,3888,"n"]],"time":1770027645521},{"kind":"selectionChanged","id":27,"selection":[[3889,3889]],"time":1770027645525},{"kind":"changed","id":27,"v":219,"edit":[[3889,3889,"s"]],"time":1770027645704},{"kind":"selectionChanged","id":27,"selection":[[3890,3890]],"time":1770027645712},{"kind":"changed","id":27,"v":221,"edit":[[3890,3890,"t"]],"time":1770027645795},{"kind":"selectionChanged","id":27,"selection":[[3891,3891]],"time":1770027645800},{"kind":"changed","id":27,"v":223,"edit":[[3891,3891,"n"]],"time":1770027645999},{"kind":"selectionChanged","id":27,"selection":[[3892,3892]],"time":1770027646005},{"kind":"changed","id":27,"v":225,"edit":[[3892,3892,"a"]],"time":1770027646117},{"kind":"selectionChanged","id":27,"selection":[[3893,3893]],"time":1770027646121},{"kind":"changed","id":27,"v":227,"edit":[[3893,3893,"c"]],"time":1770027646396},{"kind":"selectionChanged","id":27,"selection":[[3894,3894]],"time":1770027646399},{"kind":"changed","id":27,"v":229,"edit":[[3887,3894,"instanceof"]],"time":1770027646931},{"kind":"selectionChanged","id":27,"selection":[[3897,3897]],"time":1770027646937},{"kind":"selectionChanged","id":27,"selection":[[3887,3897]],"time":1770027648115},{"kind":"changed","id":27,"v":232,"edit":[[3887,3897,""]],"time":1770027648473},{"kind":"selectionChanged","id":27,"selection":[[3887,3887]],"time":1770027648479},{"kind":"changed","id":27,"v":234,"edit":[[3887,3887," "]],"time":1770027649127},{"kind":"selectionChanged","id":27,"selection":[[3888,3888]],"time":1770027649131},{"kind":"selectionChanged","id":27,"selection":[[3887,3887]],"time":1770027649524},{"kind":"changed","id":27,"v":237,"edit":[[3887,3887,"="]],"time":1770027650395},{"kind":"selectionChanged","id":27,"selection":[[3888,3888]],"time":1770027650404},{"kind":"changed","id":27,"v":239,"edit":[[3888,3888,"="]],"time":1770027650555},{"kind":"selectionChanged","id":27,"selection":[[3889,3889]],"time":1770027650558},{"kind":"changed","id":27,"v":241,"edit":[[3889,3889,"="]],"time":1770027650688},{"kind":"selectionChanged","id":27,"selection":[[3890,3890]],"time":1770027650691},{"kind":"changed","id":27,"v":243,"edit":[[3890,3890," "]],"time":1770027651422},{"kind":"selectionChanged","id":27,"selection":[[3891,3891]],"time":1770027651427},{"kind":"changed","id":27,"v":245,"edit":[[3891,3891,"''"]],"time":1770027651592},{"kind":"selectionChanged","id":27,"selection":[[3892,3892]],"time":1770027651599},{"kind":"changed","id":27,"v":247,"edit":[[3892,3892,"s"]],"time":1770027651733},{"kind":"selectionChanged","id":27,"selection":[[3893,3893]],"time":1770027651736},{"kind":"changed","id":27,"v":249,"edit":[[3893,3893,"t"]],"time":1770027651974},{"kind":"selectionChanged","id":27,"selection":[[3894,3894]],"time":1770027651982},{"kind":"changed","id":27,"v":251,"edit":[[3894,3894,"r"]],"time":1770027652020},{"kind":"selectionChanged","id":27,"selection":[[3895,3895]],"time":1770027652025},{"kind":"changed","id":27,"v":253,"edit":[[3895,3895,"i"]],"time":1770027652076},{"kind":"selectionChanged","id":27,"selection":[[3896,3896]],"time":1770027652078},{"kind":"changed","id":27,"v":255,"edit":[[3896,3896,"n"]],"time":1770027652179},{"kind":"selectionChanged","id":27,"selection":[[3897,3897]],"time":1770027652182},{"kind":"changed","id":27,"v":257,"edit":[[3897,3897,"g"]],"time":1770027652276},{"kind":"selectionChanged","id":27,"selection":[[3898,3898]],"time":1770027652279},{"kind":"selectionChanged","id":27,"selection":[[3892,3892]],"time":1770027653408},{"kind":"selectionChanged","id":27,"selection":[[3891,3891]],"time":1770027653551},{"kind":"selectionChanged","id":27,"selection":[[3887,3887]],"time":1770027653687},{"kind":"selectionChanged","id":27,"selection":[[3859,3859]],"time":1770027653828},{"kind":"selectionChanged","id":27,"selection":[[3857,3857]],"time":1770027653964},{"kind":"changed","id":27,"v":264,"edit":[[3859,3886,"typeof providerOrContribution"],[3899,3899," ?"],[3919,3919,"!"],[3942,3951,"providerOrContribution) : providerOrContribution.icon"]],"time":1770027655147},{"kind":"selectionChanged","id":27,"selection":[[4000,4000]],"time":1770027655155}]}